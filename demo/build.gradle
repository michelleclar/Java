
buildscript {
    ext {
        lombokVersion = '1.18.20'
        springBootVersion = '2.3.12.RELEASE'
        springCloudVersion = 'Hoxton.SR12'
        springCloudAlibabaVersion = '2.2.7.RELEASE'
        springCloudStarterBootstrapVersion = '3.1.2'
        commonsLangVersion = '3.12.0'
        jooqVersion = '3.11.11'

        // dependencies {
        //      imports {
        //         mavenBom org.springframework.boot.gradle.plugin.SpringBootPlugin.BOM_COORDINATES
        //     }
        // }
        // japidocsVersion = '1.4.4'
    }
}
plugins {
  id 'org.springframework.boot' version '2.3.12.RELEASE'
    id 'java'
    // id 'nu.studer.jooq' version '3.0.3'
}

allprojects {
    apply plugin: 'java'
    group = 'org.carl'
    version = '1.0-SNAPSHOT'
    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    [compileJava, compileTestJava, javadoc]*.options*.encoding = 'UTF-8'
    tasks.withType(JavaCompile) {
        options.encoding = "UTF-8"
    }
    repositories {
        mavenLocal()
        maven { url "https://maven.aliyun.com/repository/central" }

        maven { url 'https://maven.aliyun.com/repository/public' }
        maven { url "https://maven.aliyun.com/repository/jcenter" }
        jcenter()

        mavenCentral()
    }

}

subprojects {
 
   apply plugin: 'io.spring.dependency-management'

    dependencyManagement {
        dependencies {
            //统一版本管理
            dependency "org.projectlombok:lombok:${lombokVersion}"
            // dependency "org.springframework.cloud:spring-cloud-starter-bootstrap:${springCloudStarterBootstrapVersion}"
            dependency "commons-lang:commons-lang:${commonsLangVersion}"
            // dependency "io.github.yedaxia:japidocs:${japidocsVersion}"
        }
        imports {
            mavenBom "org.springframework.boot:spring-boot-dependencies:${springBootVersion}"
            mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
            mavenBom "com.alibaba.cloud:spring-cloud-alibaba-dependencies:${springCloudAlibabaVersion}"
        }
    }
}


// test {
//     include '**/*Test.class'
// }
//
// task testInteg(type: Test) {
//     include '**/*Integ.class'
//
// }
//
// jooq {
//     version = '3.11.11'
//     edition = 'OSS'
//     sample(sourceSets.main) {
//         jdbc {
//             driver = 'org.postgresql.Driver'
//             url = 'jdbc:postgresql://127.0.0.1:5432/test'
//             user = 'root'
//             password = 'root'
//         }
//         generator {
//             name = 'org.jooq.codegen.DefaultGenerator'
//             strategy {
//                 name = 'org.jooq.codegen.DefaultGeneratorStrategy'
//             }
//             database() {
//                 name = 'org.jooq.meta.postgres.PostgresDatabase'
//                 inputSchema = 'public'
//                 includes = 'paas_bi_.*|paas_datarights_.*|paas_mt_.*|paas_auth_.*|paas_org_.*'
//             }
//             generate() {}
//             target {
//                 packageName = 'com.carl.gen'
//                 directory = 'src/main/java'
//             }
//         }
//     }
// }
//
